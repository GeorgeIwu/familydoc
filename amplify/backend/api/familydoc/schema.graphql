type User
  @model {
    id: ID!
    type: String!
    email: String!
    username: String!
    phone_number: String!
    family_name: String!
    given_name: String!
    chats: [ChatMember] @connection(keyName: "byMember", fields: ["id"])
    createdAt: AWSDateTime!
    updatedAt: AWSDateTime!
}

type ChatMember
  @model(queries: null)
  @key(name: "byChat", fields: ["chatID", "memberID"])
  @key(name: "byMember", fields: ["memberID", "chatID"]) {
    id: ID!
    chatID: ID!
    memberID: ID!
    status: StatusType!
    priviledges: [MessageType]
    chat: Chat @connection(fields: ["chatID"])
    member: User! @connection(fields: ["memberID"])
    createdAt: AWSDateTime!
    updatedAt: AWSDateTime!
}

type Chat
  @model {
    id: ID!
    name: String!
    owner: String!
    members: [ChatMember] @connection(keyName: "byChat", fields: ["id"])
    messages: [Message] @connection
    createdAt: AWSDateTime!
    updatedAt: AWSDateTime!
}

type Message
  @model(queries: null)
  @auth(rules: [{ allow: owner, operations: [create, update, delete] }]) {
    id: ID!
    text: String
    type: MessageType!
    chat: Chat! @connection
    createdAt: AWSDateTime!
    updatedAt: AWSDateTime!
}

enum MessageType {
    ALL
    TEAM
    DRUG
    SCAN
    VITAL
    FINANCE
    LAB
}

enum StatusType {
    OFFERED
    REQUESTED
    APPROVED
}
